# =============================================================================
# PRODUCTION ENVIRONMENT VARIABLES
# =============================================================================
# This file documents all environment variables required for production deployment.
# Copy this file to .env.production and fill in the actual values.
# NEVER commit .env.production files with real secrets to version control!

# =============================================================================
# GENERAL CONFIGURATION
# =============================================================================
ENV=production
SERVICE_NAME=secureconnect
PORT=8080
APP_URL=https://secureconnect.com

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# Comma-separated list of allowed origins for API and WebSocket connections
# Replace with your actual production domains
CORS_ALLOWED_ORIGINS=https://secureconnect.com,https://api.secureconnect.com

# =============================================================================
# JWT CONFIGURATION
# =============================================================================
# Generate a strong random secret (at least 32 characters)
# Use: openssl rand -base64 32
JWT_SECRET=

# =============================================================================
# DATABASE CONFIGURATION (CockroachDB)
# =============================================================================
DB_HOST=cockroachdb
DB_PORT=26257
DB_USER=root
DB_NAME=secureconnect_poc
DB_SSL_MODE=disable
DB_MAX_CONNS=25
DB_MIN_CONNS=5

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_POOL_SIZE=10
REDIS_TIMEOUT=5

# =============================================================================
# CASSANDRA CONFIGURATION
# =============================================================================
CASSANDRA_HOST=cassandra
CASSANDRA_KEYSPACE=secureconnect_ks
CASSANDRA_CONSISTENCY=QUORUM
CASSANDRA_TIMEOUT=600

# =============================================================================
# MINIO CONFIGURATION (Object Storage)
# =============================================================================
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=CHANGE_ME_MINIO_ACCESS_KEY
MINIO_SECRET_KEY=CHANGE_ME_MINIO_SECRET_KEY
MINIO_USE_SSL=false
MINIO_BUCKET=secureconnect

# =============================================================================
# SMTP CONFIGURATION (Email Provider)
# =============================================================================
# REQUIRED IN PRODUCTION - Configure your SMTP server credentials
# Example for Gmail (use App Password, not regular password)
# Example for SendGrid, Mailgun, AWS SES, etc.
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=CHANGE_ME_SMTP_PASSWORD_OR_APP_PASSWORD
SMTP_FROM=noreply@secureconnect.com

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=stdout
LOG_FILE_PATH=/logs/app.log

# =============================================================================
# FIREBASE CONFIGURATION (Push Notifications)
# =============================================================================
PUSH_PROVIDER=firebase
# For Docker secrets (production): use FILE pattern
FIREBASE_PROJECT_ID_FILE=/run/secrets/firebase_project_id
FIREBASE_CREDENTIALS_PATH=/run/secrets/firebase_credentials
# For local development only (NOT for production):
# FIREBASE_PROJECT_ID=your-firebase-project-id
# FIREBASE_CREDENTIALS_PATH=./firebase-adminsdk.json

# =============================================================================
# TURN/STUN CONFIGURATION (WebRTC)
# =============================================================================
TURN_SERVER_HOST=turn
TURN_SERVER_PORT=3478
TURN_USER=turnuser
TURN_PASSWORD=CHANGE_ME_TURN_PASSWORD
TURN_REALM=secureconnect.com

# =============================================================================
# DOCKER SECRETS (for docker-compose.production.yml)
# =============================================================================
# Create Docker secrets with these commands:
# echo "your-jwt-secret" | docker secret create jwt_secret -
# echo "your-db-password" | docker secret create db_password -
# echo "your-redis-password" | docker secret create redis_password -
# echo "your-cassandra-user" | docker secret create cassandra_user -
# echo "your-cassandra-password" | docker secret create cassandra_password -
# echo "your-minio-access-key" | docker secret create minio_access_key -
# echo "your-minio-secret-key" | docker secret create minio_secret_key -
# echo "your-smtp-username" | docker secret create smtp_username -
# echo "your-smtp-password" | docker secret create smtp_password -
# echo "your-firebase-project-id" | docker secret create firebase_project_id -
# cat firebase-adminsdk.json | docker secret create firebase_credentials -
# echo "your-turn-user" | docker secret create turn_user -
# echo "your-turn-password" | docker secret create turn_password -

# =============================================================================
# SECURITY NOTES
# =============================================================================
# 1. Generate strong random secrets for production:
#    - JWT_SECRET: openssl rand -base64 32
#    - DB_PASSWORD: openssl rand -base64 24
#    - REDIS_PASSWORD: openssl rand -base64 24
#    - CASSANDRA_PASSWORD: openssl rand -base64 24
#    - MINIO_SECRET_KEY: openssl rand -base64 24
#    - SMTP_PASSWORD: Use your email provider's app password
#    - TURN_PASSWORD: openssl rand -base64 16
#
# 2. Never commit .env files with real secrets to version control
#
# 3. Use Docker secrets for sensitive data in production
#    - Secrets are mounted at /run/secrets/<secret_name>
#    - Use FILE pattern: VARIABLE_NAME_FILE=/run/secrets/secret_name
#    - Application reads from file path instead of environment variable
#
# 4. Restrict CORS_ALLOWED_ORIGINS to your actual production domains
#
# 5. Ensure SMTP credentials are configured - mock sender will NOT work in production
#
# 6. Ensure Firebase credentials are configured - mock provider will NOT work in production
#    - Create Docker secret for project ID: echo "your-project-id" | docker secret create firebase_project_id -
#    - Create Docker secret for credentials: cat firebase-adminsdk.json | docker secret create firebase_credentials -
#    - Set FIREBASE_CREDENTIALS_PATH to /run/secrets/firebase_credentials
#    - Set FIREBASE_PROJECT_ID_FILE to /run/secrets/firebase_project_id
#
# 7. Firebase JSON credentials file MUST NOT be committed to GitHub
#    - Add to .gitignore: firebase-adminsdk.json
#    - Use Docker secrets only for production
#    - For local development, use .env.local with local file path
