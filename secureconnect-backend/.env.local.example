# ============================================
# LOCAL DOCKER DESKTOP DEPLOYMENT
# Environment Variables Configuration
# ============================================
# Copy this file to .env.local and customize as needed
# DO NOT use these values in production!

# ============================================
# TURN/STUN SERVER CONFIGURATION
# ============================================
# IMPORTANT: TURN is DISABLED by default on Windows to prevent
# 100% CPU usage and system freezes. See docs/deployment/TURN_SERVER_WINDOWS_SAFETY_GUIDE.md

# TURN Server Enable/Disable (DISABLED by default for Windows safety)
# Set to 'true' only if you need TURN relay for NAT traversal testing
# WARNING: Enabling TURN on Windows Docker Desktop may cause system freeze
TURN_ENABLED=false

# STUN Servers (free, no resource impact - always available)
# Google Public STUN servers work for most local development scenarios
STUN_SERVERS=stun:stun.l.google.com:19302,stun:stun1.l.google.com:19302

# TURN authentication username (only used when TURN_ENABLED=true)
TURN_USER=turnuser

# TURN authentication password (use strong password in production)
TURN_PASSWORD=turnpassword

# TURN authentication realm
TURN_REALM=local.turn

# External IP (auto-detected by Docker for local deployment)
# For production, set to your public IP
TURN_EXTERNAL_IP=auto

# TURN Server Host (Docker container name)
TURN_SERVER_HOST=turn

# TURN Server Port
TURN_SERVER_PORT=3478

# ============================================
# DATABASE CONFIGURATION
# ============================================

# CockroachDB
DB_HOST=cockroachdb
DB_PORT=26257
DB_NAME=secureconnect_poc
DB_USER=root
DB_PASSWORD=

# Cassandra
CASSANDRA_HOST=cassandra
CASSANDRA_PORT=9042
CASSANDRA_KEYSPACE=secureconnect_ks

# Redis
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=

# ============================================
# STORAGE CONFIGURATION
# ============================================

# MinIO
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=
MINIO_SECRET_KEY=

# ============================================
# SERVICE CONFIGURATION
# ============================================

# Environment (local, development, staging, production)
ENV=local

# JWT Secret (use strong secret in production)
JWT_SECRET=

# Log Level (debug, info, warning, error)
LOG_LEVEL=info

# ============================================
# VIDEO SERVICE CONFIGURATION
# ============================================

# ICE Servers Configuration (JSON array)
# When TURN_ENABLED=false (default), uses STUN-only mode (safe for Windows)
# When TURN_ENABLED=true, includes TURN server for NAT traversal
#
# STUN-Only Mode (default - safe for Windows):
# ICE_SERVERS=[{"urls":["stun:stun.l.google.com:19302"]},{"urls":["stun:stun1.l.google.com:19302"]}]
#
# STUN + TURN Mode (for NAT traversal testing):
# ICE_SERVERS=[{"urls":["stun:stun.l.google.com:19302"]},{"urls":["turn:turn:3478"],"username":"turnuser","credential":"turnpassword"}]
ICE_SERVERS=[{"urls":["stun:stun.l.google.com:19302"]},{"urls":["stun:stun1.l.google.com:19302"}]

# ============================================
# API GATEWAY CONFIGURATION
# ============================================

# API Gateway Port
API_GATEWAY_PORT=8080

# Public-facing ports (changed for Windows compatibility)
NGINX_HTTP_PORT=9090
NGINX_HTTPS_PORT=9443

# ============================================
# SERVICE PORTS
# ============================================

# Auth Service
AUTH_SERVICE_PORT=18080

# Chat Service
CHAT_SERVICE_PORT=8082

# Video Service
VIDEO_SERVICE_PORT=8083

# Storage Service
STORAGE_SERVICE_PORT=8084

# ============================================
# MONITORING CONFIGURATION (Optional)
# ============================================

# Prometheus
PROMETHEUS_PORT=9091

# Grafana
GRAFANA_PORT=3000

# Loki
LOKI_PORT=3100

# Promtail
PROMTAIL_PORT=9080

# ============================================
# SECURITY NOTES
# ============================================
#
# IMPORTANT: This configuration is for LOCAL TESTING ONLY
#
# 1. Do NOT use these credentials in production
# 2. Do NOT commit this file to version control
# 3. Use strong, unique passwords in production
# 4. Enable TLS/SSL for all external connections in production
# 5. Use proper secrets management (e.g., HashiCorp Vault, AWS Secrets Manager)
#
# ============================================
# TURN SERVER WINDOWS SAFETY
# ============================================
#
# WARNING: TURN server can cause 100% CPU usage and system freeze on Windows
# Docker Desktop due to port conflicts and NAT implementation issues.
#
# RECOMMENDATIONS:
# 1. KEEP TURN_ENABLED=false for Windows local development (default)
# 2. Use STUN-only mode for most local WebRTC testing
# 3. Enable TURN only when testing NAT traversal scenarios
# 4. Use Linux/macOS or cloud deployment for production TURN
# 5. See docs/deployment/TURN_SERVER_WINDOWS_SAFETY_GUIDE.md for details
#
# TO ENABLE TURN ON WINDOWS (NOT RECOMMENDED):
# - Set TURN_ENABLED=true in .env.local
# - Reduce relay ports to 10-20 in configs/turnserver-local.conf
# - Disable verbose logging
# - Monitor CPU and memory usage closely
# - Stop TURN immediately if system becomes unresponsive
#
# TO ENABLE TURN FOR PRODUCTION:
# - Use docker-compose --profile production up
# - Set EXTERNAL_IP to your server's public IP
# - Ensure TLS certificates are configured
# - Configure firewall rules for TURN ports
#
# ============================================
