server:
  http_listen_port: 9080

clients:
  - url: http://loki:3100/loki/api/v1/push

positions:
  filename: /tmp/positions.yaml

scrape_configs:
  # API Gateway logs
  - job_name: api-gateway
    static_configs:
      - targets:
          - localhost
          labels:
              job: api-gateway
              service: api-gateway
    pipeline_stages:
      - json:
          expressions:
              level: level
              msg: message
              service: service
      - labels:
              level:
              service:
              hostname:
      - output:
          source: stdout

  # Auth Service logs
  - job_name: auth-service
    static_configs:
      - targets:
          - localhost
          labels:
              job: auth-service
              service: auth-service
    pipeline_stages:
      - json:
          expressions:
              level: level
              msg: message
              service: service
      - labels:
              level:
              service:
              hostname:
      - output:
          source: stdout

  # Chat Service logs
  - job_name: chat-service
    static_configs:
      - targets:
          - localhost
          labels:
              job: chat-service
              service: chat-service
    pipeline_stages:
      - json:
          expressions:
              level: level
              msg: message
              service: service
      - labels:
              level:
              service:
              hostname:
      - output:
          source: stdout

  # Video Service logs
  - job_name: video-service
    static_configs:
      - targets:
          - localhost
          labels:
              job: video-service
              service: video-service
    pipeline_stages:
      - json:
          expressions:
              level: level
              msg: message
              service: service
      - labels:
              level:
              service:
              hostname:
      - output:
          source: stdout

  # Storage Service logs
  - job_name: storage-service
    static_configs:
      - targets:
          - localhost
          labels:
              job: storage-service
              service: storage-service
    pipeline_stages:
      - json:
          expressions:
              level: level
              msg: message
              service: service
      - labels:
              level:
              service:
              hostname:
      - output:
          source: stdout
