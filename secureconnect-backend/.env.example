# =============================================================================
# SecureConnect Backend - Environment Variables
# =============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# --- SERVER CONFIGURATION ---
ENV=development         # Options: development, staging, production
PORT=8080              # Service port (override per service)
SERVICE_NAME=secureconnect

# --- DATABASE: COCKROACHDB ---
DB_HOST=localhost
DB_PORT=26257
DB_USER=root
DB_PASSWORD=           # Leave empty for insecure mode
DB_NAME=secureconnect
DB_SSL_MODE=disable    # Options: disable, require, verify-ca, verify-full
DB_MAX_CONNS=25        # Maximum database connections
DB_MIN_CONNS=5         # Minimum database connections

# --- CACHE: REDIS ---
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=        # Leave empty if no password
REDIS_DB=0
REDIS_POOL_SIZE=10
REDIS_TIMEOUT=5        # Timeout in seconds

# --- EMAIL: SMTP ---
# For production, configure SMTP to send real emails
# For development, leave empty to use mock sender
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@secureconnect.com

# --- DATABASE: CASSANDRA ---
CASSANDRA_HOSTS=localhost          # Comma-separated list: host1,host2,host3
CASSANDRA_KEYSPACE=secureconnect
CASSANDRA_CONSISTENCY=QUORUM       # Options: ONE, QUORUM, ALL
CASSANDRA_TIMEOUT=600              # Timeout in milliseconds

# --- OBJECT STORAGE: MINIO ---
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin        # ‚ö†Ô∏è  CHANGE IN PRODUCTION!
MINIO_SECRET_KEY=minioadmin        # ‚ö†Ô∏è  CHANGE IN PRODUCTION!
MINIO_USE_SSL=false                # Set true for HTTPS
MINIO_BUCKET=secureconnect

# --- AUTHENTICATION: JWT ---
# üîí SECURITY CRITICAL: Use a strong random secret (min 32 characters)
# Generate with: openssl rand -base64 32
JWT_SECRET=
JWT_ACCESS_EXPIRY=15               # Access token expiry in minutes
JWT_REFRESH_EXPIRY=720             # Refresh token expiry in hours (30 days)

# --- LOGGING ---
LOG_LEVEL=info                     # Options: debug, info, warn, error
LOG_FORMAT=json                    # Options: json, text
LOG_OUTPUT=stdout                  # Options: stdout, file
LOG_FILE_PATH=/logs/app.log        # Used when LOG_OUTPUT=file

# --- WEBRTC / VIDEO SERVICE ---
# STUN/TURN servers for NAT traversal
WEBRTC_STUN_SERVERS=stun:stun.l.google.com:19302
WEBRTC_TURN_SERVERS=               # Format: turn:user:pass@host:port

# --- PUSH NOTIFICATIONS ---
# Provider: mock, firebase
PUSH_PROVIDER=firebase
# Firebase Cloud Messaging Configuration
# Get your project ID from Firebase Console: https://console.firebase.google.com/
FIREBASE_PROJECT_ID=your-firebase-project-id
# For production, set GOOGLE_APPLICATION_CREDENTIALS to path of service account JSON file
# or set FIREBASE_CREDENTIALS environment variable with JSON content
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json

# --- MONITORING (Optional) ---
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090

# --- RATE LIMITING ---
RATE_LIMIT_REQUESTS=100            # Requests per minute per IP
RATE_LIMIT_WINDOW=60               # Window in seconds

# =============================================================================
# SECURITY NOTES FOR PRODUCTION:
# =============================================================================
# 1. Generate strong JWT_SECRET: openssl rand -base64 64
# 2. Change all default passwords (MinIO, Redis, CockroachDB)
# 3. Enable SSL/TLS for all services (DB_SSL_MODE=verify-full)
# 4. Use secrets management (HashiCorp Vault, AWS Secrets Manager)
# 5. Enable HTTPS with valid certificates
# 6. Restrict database connections to specific IPs
# 7. Regular security audits and dependency updates
# =============================================================================
